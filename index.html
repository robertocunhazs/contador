<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Contador : Contador de segundos" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
	<script src="javascripts/jquery-1.11.1.min.js" type="text/javascript"></script> 
	<script src="javascripts/jquery.maskedinput.min.js" type="text/javascript"></script>
	
	
	    
    <title>Contador de vida</title>
  </head>
<script type="text/javascript">  
    $(document).ready(function(){
		$(".data").mask("99/99/9999"); 
    }); 
   </script>
  <body>

    <form action="" method="post" name="txtForm" onSubmit="javascript: return test() ">
<div class="datanasc">Data de Nascimento <input class="data" type="text" name="nome" />
<input type="submit" value="Consultar" class="buttom" /></div>
</form>
<canvas id="canvas" height="400" width="1100" ></canvas> 
  
<script language="javascript" type="text/javascript">				   
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
function test(){
	//Início do tratamento do tempo de vida restante
var data = document.txtForm.nome.value;
	
var dia = data.substr(0,2);
var mes = data.substr(3,2);
var ano = data.substr(6,4);
//converter todo o tempo para seg
var expect = 75*12*30*24*60*60//em segundos
now = new Date;
var dataNasc = parseInt(dia)+parseInt(mes)*30+parseInt(ano)*12*30; //data em dias
now = new Date;
var dataAtual = now.getDay()+(now.getMonth()+1)*30+now.getFullYear()*12*30;//em dias
var tempoVida = (dataAtual-dataNasc)*24*60*60;//em segundos
var tempo = expect - tempoVida; //em segundos
var tempo2 = "Você é um sobrevivente, aproveite a vida!"
//Fim do tratamento do tempo de vida restante
if(tempo >= 0){
if(typeof game_loop != "undefined") clearInterval(game_loop);
game_loop = setInterval(contador, 1000);}else{
if(typeof game_loop != "undefined") clearInterval(game_loop);
game_loop = setInterval(semtempo, 1000);
}
function contador(){
ctx.fillStyle="#212121";
ctx.beginPath();
ctx.fillRect(0, 0, canvas.width, canvas.height);
ctx.closePath();
ctx.fillStyle="white";
ctx.font = "40px Courier New";
ctx.fillText("Você tem "+tempo+" segundos de vida", 200, 200);
ctx.font = "20px Courier New";
ctx.fillText("Não desperdice seu tempo com lamentações e aborrecimentos, seja Feliz!", 210, 300)
tempo--;
	}
function semtempo(){
ctx.fillStyle="#212121";
ctx.beginPath();
ctx.fillRect(0, 0, canvas.width, canvas.height);
ctx.closePath();
ctx.fillStyle="white";
ctx.font = "40px Courier New";
ctx.fillText("Parabéns, você é um sobrevivente!", 200, 200);
ctx.font ="20px Courier New";
ctx.fillText("A expectativa de vida no Brasil é de 75 anos e você ultrapassou essa barreira!", 140, 300)
}
return false;
}

</script>
  </body>
</html>
